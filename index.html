<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Brincando de Se Vestir</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f8fafc;
  color: #0f172a;
}

/* Topo */
.topo {
  background: #ffffff;
  padding: 10px 15px;
  display: flex;
  gap: 10px;
  align-items: center;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.logo {
  height: 60px;
}

.pesquisa {
  flex: 1;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #cbd5e1;
  font-size: 16px;
}

#btnCarrinho {
  position: relative;
  background: #22c55e;
  border: none;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 22px;
}

#contador {
  position: absolute;
  top: -5px;
  right: -5px;
  background: red;
  color: #fff;
  font-size: 12px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Conte√∫do */
main {
  padding: 20px;
}

h2 {
  text-align: center;
}

/* Grid de produtos */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.card {
  background: #ffffff;
  border-radius: 12px;
  padding: 15px;
  text-align: center;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.card img {
  max-width: 100%;
  border-radius: 8px;
}

.card h3 {
  margin: 10px 0 5px 0;
}

.card button {
  margin-top: 10px;
  padding: 8px 12px;
  border: none;
  border-radius: 6px;
  background: #38bdf8;
  cursor: pointer;
  font-weight: bold;
}

/* Modal carrinho */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
}

.modal-conteudo {
  background: #ffffff;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 400px;
}

#fechar {
  float: right;
  cursor: pointer;
  font-size: 22px;
  font-weight: bold;
}

#comprar {
  margin-top: 10px;
  width: 100%;
  padding: 10px;
  border: none;
  border-radius: 8px;
  background: #22c55e;
  font-weight: bold;
  cursor: pointer;
}

#calcularFrete {
  margin-top: 8px;
  width: 100%;
  padding: 8px;
  border: none;
  border-radius: 6px;
  background: #38bdf8;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>
<body>

<header class="topo">
  <img src="logoo.png" alt="Brincando de Se Vestir" class="logo">
  <input type="text" id="campoPesquisa" class="pesquisa" placeholder="üîç Pesquisar produtos...">
  <button id="btnCarrinho">üõí<span id="contador">0</span></button>
</header>

<main>
  <h2>üëï Nossos Produtos</h2>
  <div id="produtos" class="grid"></div>
</main>

<!-- Modal Carrinho -->
<div id="modalCarrinho" class="modal">
  <div class="modal-conteudo">
    <span id="fechar">&times;</span>
    <h2>Seu Carrinho</h2>

    <div id="listaCarrinho"></div>

    <div style="margin:10px 0;">
      <input type="text" id="cep" placeholder="Digite seu CEP" style="width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;">
      <button id="calcularFrete">Calcular Frete</button>
    </div>

    <p id="frete">Frete: R$ 0,00</p>
    <p id="total">Total: R$ 0,00</p>

    <button id="comprar">Finalizar Compra</button>
  </div>
</div>

<script>
// Produtos (edite como quiser)
const produtos = [
  { id: 1, nome: "Vestido Infantil Rosa", preco: 59.90, img: "https://via.placeholder.com/300x300?text=Vestido" },
  { id: 2, nome: "Conjunto Infantil Azul", preco: 79.90, img: "https://via.placeholder.com/300x300?text=Conjunto" },
  { id: 3, nome: "Casaco Infantil Verde", preco: 99.90, img: "https://via.placeholder.com/300x300?text=Casaco" },
  { id: 4, nome: "Camiseta Infantil", preco: 39.90, img: "https://via.placeholder.com/300x300?text=Camiseta" }
];

let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
let valorFrete = 0;

// Elementos
const divProdutos = document.getElementById("produtos");
const contador = document.getElementById("contador");
const modal = document.getElementById("modalCarrinho");
const btnCarrinho = document.getElementById("btnCarrinho");
const fechar = document.getElementById("fechar");
const listaCarrinho = document.getElementById("listaCarrinho");
const totalEl = document.getElementById("total");
const freteEl = document.getElementById("frete");
const btnComprar = document.getElementById("comprar");
const campoPesquisa = document.getElementById("campoPesquisa");
const inputCep = document.getElementById("cep");
const btnCalcularFrete = document.getElementById("calcularFrete");

// Renderizar produtos
function renderProdutos(lista) {
  divProdutos.innerHTML = "";
  lista.forEach(p => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${p.img}">
      <h3>${p.nome}</h3>
      <p>R$ ${p.preco.toFixed(2)}</p>
      <button onclick="adicionarCarrinho(${p.id})">Adicionar</button>
    `;
    divProdutos.appendChild(card);
  });
}

// Carrinho
function adicionarCarrinho(id) {
  const produto = produtos.find(p => p.id === id);
  carrinho.push(produto);
  salvarCarrinho();
  atualizarContador();
  alert("Produto adicionado ao carrinho!");
}

function salvarCarrinho() {
  localStorage.setItem("carrinho", JSON.stringify(carrinho));
}

function atualizarContador() {
  contador.innerText = carrinho.length;
}

// Abrir/fechar modal
btnCarrinho.onclick = () => {
  renderCarrinho();
  modal.style.display = "flex";
};

fechar.onclick = () => {
  modal.style.display = "none";
};

// Renderizar carrinho
function renderCarrinho() {
  listaCarrinho.innerHTML = "";
  let total = 0;

  carrinho.forEach((item, index) => {
    total += item.preco;
    const div = document.createElement("div");
    div.innerHTML = `
      <p>${item.nome} - R$ ${item.preco.toFixed(2)}
      <button onclick="removerItem(${index})">‚ùå</button></p>
    `;
    listaCarrinho.appendChild(div);
  });

  const totalComFrete = total + valorFrete;
  totalEl.innerText = "Total: R$ " + totalComFrete.toFixed(2);
}

// Remover item
function removerItem(index) {
  carrinho.splice(index, 1);
  salvarCarrinho();
  atualizarContador();
  renderCarrinho();
}

// C√°lculo de frete por CEP (regra simples)
function calcularFretePorCep(cep) {
  cep = cep.replace(/\D/g, "");

  if (cep.length !== 8) {
    alert("Digite um CEP v√°lido (8 n√∫meros).");
    return null;
  }

  const primeiroDigito = parseInt(cep[0]);

  if (primeiroDigito <= 3) {
    return 15.00;
  } else if (primeiroDigito <= 6) {
    return 25.00;
  } else {
    return 35.00;
  }
}

// Bot√£o calcular frete
btnCalcularFrete.onclick = () => {
  const cep = inputCep.value;
  const resultado = calcularFretePorCep(cep);

  if (resultado !== null) {
    valorFrete = resultado;
    freteEl.innerText = "Frete: R$ " + valorFrete.toFixed(2);
    renderCarrinho();
  }
};

// Finalizar compra (WhatsApp)
btnComprar.onclick = () => {
  if (carrinho.length === 0) {
    alert("Carrinho vazio!");
    return;
  }

  let mensagem = "Ol√°, quero comprar:\n";
  carrinho.forEach(item => {
    mensagem += `- ${item.nome} (R$ ${item.preco.toFixed(2)})\n`;
  });
  mensagem += `Frete: R$ ${valorFrete.toFixed(2)}\n`;

  // TROQUE pelo seu n√∫mero
  const url = "https://wa.me/5500000000000?text=" + encodeURIComponent(mensagem);
  window.open(url, "_blank");
};

// Pesquisa
campoPesquisa.addEventListener("input", () => {
  const termo = campoPesquisa.value.toLowerCase();
  const filtrados = produtos.filter(p => p.nome.toLowerCase().includes(termo));
  renderProdutos(filtrados);
});

// Inicializar
renderProdutos(produtos);
atualizarContador();
</script>

</body>
</html>